
#define CELL_QUANTITY 6    // колличество ячеек
#define START_PIN 7 // пин с которого начинается отчет 
#define DELAY 500    // задержка смены значения

bool is_using[QUANTITY] = {false}; // изпользуется ли ячейка
long previousMillis[QUANTITY] = {0}; // предыдущее время с момента запуска
void check(); // инициализация функции проверки на наличие ключа

void setup() {
  for(int i = 0; i <= QUANTITY; i++){ // в цикле настраиваем каждый пин
    pinMode(i + START_PIN, INPUT);
  }
}

void loop() {
 check(); 
}
void check()// проверка
{
  for(int i = 0; i <= QUANTITY; ++i) {//с каждым пином проверяем есть ли там ключ или нет
     if(digitalRead(i + START_PIN) == LOW){//если ключа в ключнце нет
      if(millis - previousMillis[i] > DELAY){// время с момента запуска до последней проверки
        previousMillis[i] = millis;
        is_using[i] = true;
     }
     else{// если ключ в ключнице есть
      if(millis - previousMillis[i] > DELAY){
        previousMillis[i] = millis;
        is_using[i] = false;
      }
     }
  }
}

  
